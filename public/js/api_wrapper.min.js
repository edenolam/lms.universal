const scorm12Errors={0:"No error",101:"General Exception",201:"Invalid Argument Error",202:"Element cannot have children",203:"Element not an array.  Cannot have count",301:"Not initialized",401:"Not implemented error",402:"Invalid set value, element is a keyword",403:"Element is read only",404:"Element is write only",405:"Incorrect Data Type"},updateTracking=t=>{API.scoData=Array.isArray(t.details)?{}:Object.assign({},t.details)},commitResult=(t,e,a)=>{let s=scorm_sco_commit_url.replace("PLACEHOLDER",e);fetch(s,{cache:"no-cache",credentials:"same-origin",headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},method:"POST",mode:"cors",redirect:"follow",referrer:"no-referrer",body:JSON.stringify(a)}).then(t=>t.json()).then(t=>{updateTracking(t)}).catch(t=>console.log(t))};var API={__offlineAPIWrapper:!1,apiInitialized:!1,apiLastError:0,scoData:Array.isArray(tracking.details)?{}:Object.assign({},tracking.details),apiTerminated:!1,pattern:"^[-]?[0-9]+([.][0-9]{1,7})?$",regex:new RegExp(this.pattern),LMSInitialize:function(t){if(""!=t)return this.apiLastError="201","false";if(0==this.apiInitialized){this.scoData["cmi.core.student_id"]=user?user.autoId:-1,this.scoData["cmi.core.student_name"]=user?`${user.firstName}, ${user.lastName}`:"anon., anon.",this.scoData["cmi.core.lesson_mode"]=tracking.lessonMode,this.scoData["cmi.core.lesson_location"]=tracking.lessonLocation,this.scoData["cmi.core.progression"]=tracking.progression,this.scoData["cmi.core.credit"]=tracking.credit;let t=tracking.totalTimeInt;const e=t/144e3,a=(t%=144e3)/6e3,s=(t%=6e3)/100;t%=100,this.scoData["cmi.core.total_time"]=`${e}:${a}:${s}.${t}`,this.scoData["cmi.core.entry"]=tracking.entry,this.scoData["cmi.suspend_data"]=tracking.suspendData,this.scoData["cmi.launch_data"]=null!==sco.data.launchData?sco.data.launchData:"",this.scoData["cmi.core._children"]="student_id,student_name,lesson_location,progression,credit,lesson_status,entry,score,total_time,lesson_mode,exit,session_time",this.scoData["cmi.core.score._children"]="raw,min,max",this.scoData["cmi.core.session_time"]="0000:00:00.00",this.scoData["cmi.core.exit"]="",this.scoData["cmi.student_data._children"]="mastery_score,time_limit_action,max_time_allowed",this.scoData["cmi.student_data.mastery_score"]=null!==sco.data.scoreToPassInt?sco.data.scoreToPassInt:"",this.scoData["cmi.student_data.max_time_allowed"]=null!==sco.data.maxTimeAllowed?sco.data.maxTimeAllowed:"",this.scoData["cmi.student_data.time_limit_action"]=null!==sco.data.timeLimitAction?sco.data.timeLimitAction:""}return this.apiLastError="0",this.apiInitialized=!0,"true"},LMSFinish:function(t){return this.apiInitialized?""!==t?(this.apiLastError="201","false"):(this.apiLastError="0",this.apiInitialized=!1,"SUSPEND"===this.scoData["cmi.core.exit"].toUpperCase()?this.scoData["cmi.core.entry"]="resume":this.scoData["cmi.core.entry"]="",commitResult(sco.id,"log",this.scoData),"true"):(this.apiLastError="301","false")},LMSGetValue:function(t){if(!this.apiInitialized)return this.apiLastError="301","";switch(t){case"cmi.core._children":case"cmi.core.student_id":case"cmi.core.student_name":case"cmi.core.lesson_location":case"cmi.core.progression":case"cmi.core.credit":case"cmi.core.lesson_status":case"cmi.core.entry":case"cmi.core.score._children":case"cmi.core.score.raw":case"cmi.core.score.min":case"cmi.core.score.max":case"cmi.core.total_time":case"cmi.suspend_data":case"cmi.launch_data":case"cmi.core.lesson_mode":case"cmi.student_data._children":case"cmi.student_data.mastery_score":case"cmi.student_data.max_time_allowed":case"cmi.student_data.time_limit_action":return this.apiLastError="0",this.scoData[t]?this.scoData[t]:"";case"cmi.core.exit":case"cmi.core.session_time":return this.apiLastError="404","";default:return this.apiLastError="401",""}},LMSSetValue:function(t,e){if(!this.apiInitialized)return this.apiLastError="301","false";{let a="",s="";const i=/^[0-9]{2,4}:[0-9]{2}:[0-9]{2}(.[0-9]{1,2})?$/;let r=[];switch(t){case"cmi.core._children":case"cmi.core.score._children":case"cmi.student_data._children":return this.apiLastError="402","false";case"cmi.core.student_id":case"cmi.core.student_name":case"cmi.core.credit":case"cmi.core.entry":case"cmi.core.total_time":case"cmi.launch_data":case"cmi.core.lesson_mode":case"cmi.student_data.mastery_score":case"cmi.student_data.max_time_allowed":case"cmi.student_data.time_limit_action":return this.apiLastError="403","false";case"cmi.core.lesson_location":case"cmi.core.progression":return e.length>255?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true");case"cmi.core.lesson_status":return"PASSED"!==(a=e.toUpperCase())&&"FAILED"!==a&&"COMPLETED"!==a&&"INCOMPLETE"!==a&&"BROWSED"!==a&&"NOT ATTEMPTED"!==a?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true");case"cmi.core.score.raw":case"cmi.core.score.min":case"cmi.core.score.max":return isNaN(parseInt(e))||0>e||100<e?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true");case"cmi.core.exit":return"TIME-OUT"!==(s=e.toUpperCase())&&"SUSPEND"!==s&&"LOGOUT"!==s&&""!==s?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true");case"cmi.core.session_time":return i.test(e)?(r=e.split(":"))[1]<0||r[1]>=60||r[2]<0||r[2]>=60?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true"):(this.apiLastError="405","false");case"cmi.suspend_data":return e.length>4096?(this.apiLastError="405","false"):(this.scoData[t]=e,this.apiLastError="0","true");default:return this.apiLastError="401","false"}}},LMSCommit:function(t){return this.apiInitialized?""!==t?(this.apiLastError="201","false"):(this.apiLastError="0",commitResult(sco.id,"persist",this.scoData),"true"):(this.apiLastError="301","false")},LMSGetLastError:function(t){return this.apiLastError},LMSGetErrorString:function(t){let e="Unknown Error";switch(t){case"0":case"101":case"201":case"202":case"203":case"301":case"401":case"402":case"403":case"404":case"405":e=scorm12Errors[t]}return e},LMSGetDiagnostic:function(t){let e="Unknown Error",a=t;switch(""===a&&(a=this.apiLastError),a){case"0":case"101":case"201":case"202":case"203":case"301":case"401":case"402":case"403":case"404":case"405":e=scorm12Errors[t]}return e}};